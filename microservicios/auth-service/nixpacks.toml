[phases.setup]
nixPkgs = ["maven", "jdk21"]

[phases.build]
cmds = [
  "mvn clean install -DskipTests",
  "cd auth-service && mvn clean package -DskipTests",
  "mkdir -p target",
  "cp auth-service/target/*.jar target/"
]

[start]
cmd = "java -Dserver.port=$PORT -jar target/*.jar"
